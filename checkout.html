<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - Amor Conect</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://sdk.mercadopago.com/js/v2"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }


    :root {
      --bege: #f6ecc5;
      --vermelho-rosado: #d1656d;
      --lilas: #dfc9ed;
      --branco: #ffffff;
      --text: #444;
      --text-light: #666;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s ease;
    }


    body {
      background-color: var(--bege);
      color: var(--text);
      line-height: 1.6;
    }


    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }


    /* Header */
    header {
      background: linear-gradient(135deg, var(--vermelho-rosado), var(--lilas));
      color: var(--branco);
      padding: 1rem 0;
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
    }


    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }


    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }


    .logo img {
      height: 80px;
      width: auto;
      object-fit: contain;
    }


    .logo h1 {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--branco);
    }


    .btn {
      padding: 0.8rem 2rem;
      border-radius: 30px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      display: inline-block;
      text-align: center;
      font-size: 1rem;
    }


    .btn-outline {
      background: transparent;
      border: 2px solid var(--branco);
      color: var(--branco);
    }


    .btn-primary {
      background: var(--vermelho-rosado);
      color: var(--branco);
      border: none;
    }


    .btn-secondary {
      background: transparent;
      border: 2px solid var(--vermelho-rosado);
      color: var(--vermelho-rosado);
    }


    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }


    /* Main Content */
    .main-content {
      padding: 3rem 0;
      min-height: calc(100vh - 200px);
    }


    .checkout-grid {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 3rem;
      align-items: start;
    }


    @media (max-width: 968px) {
      .checkout-grid {
        grid-template-columns: 1fr;
      }
    }


    /* Order Summary */
    .order-summary {
      background: var(--branco);
      border-radius: 20px;
      padding: 2.5rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--lilas);
    }


    .section-title {
      font-size: 1.8rem;
      color: var(--vermelho-rosado);
      margin-bottom: 2rem;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }


    .plan-selected {
      background: linear-gradient(135deg, var(--lilas), var(--bege));
      padding: 2rem;
      border-radius: 15px;
      margin-bottom: 2rem;
      text-align: center;
      border: 2px solid var(--lilas);
    }


    .plan-name {
      font-size: 1.6rem;
      color: var(--vermelho-rosado);
      margin-bottom: 0.5rem;
      font-weight: 700;
    }


    .plan-price {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      color: var(--text);
    }


    .plan-period {
      color: var(--text-light);
      font-size: 1.1rem;
    }


    .benefits-list {
      list-style: none;
      margin: 2rem 0;
    }


    .benefits-list li {
      padding: 1rem 0;
      border-bottom: 1px solid var(--bege);
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 1.1rem;
    }


    .benefits-list li:last-child {
      border-bottom: none;
    }


    .security-note {
      text-align: center;
      color: var(--text-light);
      font-size: 0.9rem;
      margin-top: 2rem;
      padding: 1rem;
      background: var(--bege);
      border-radius: 10px;
    }


    /* Payment Methods */
    .payment-methods {
      background: var(--branco);
      border-radius: 20px;
      padding: 2.5rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--lilas);
      position: sticky;
      top: 120px;
    }


    .payment-options {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
    }


    .payment-option {
      background: var(--bege);
      padding: 1.5rem;
      border-radius: 15px;
      cursor: pointer;
      transition: var(--transition);
      border: 2px solid transparent;
      display: flex;
      align-items: center;
      gap: 15px;
    }


    .payment-option:hover {
      border-color: var(--lilas);
      transform: translateY(-2px);
    }


    .payment-option.selected {
      border-color: var(--vermelho-rosado);
      background: linear-gradient(135deg, #f8f0ff, var(--bege));
    }


    .payment-icon {
      font-size: 2rem;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--branco);
      border-radius: 12px;
    }


    .payment-info {
      flex: 1;
    }


    .payment-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 0.3rem;
      color: var(--text);
    }


    .payment-desc {
      color: var(--text-light);
      font-size: 0.9rem;
    }


    /* Payment Simulation */
    .payment-simulation {
      display: none;
      background: var(--branco);
      border-radius: 15px;
      padding: 2rem;
      margin-top: 2rem;
      border: 2px solid var(--lilas);
      animation: fadeIn 0.3s ease;
    }


    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }


    .pix-container, .card-container {
      text-align: center;
    }


    .simulation-title {
      font-size: 1.4rem;
      color: var(--vermelho-rosado);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }


    .pix-qr-code {
      background: linear-gradient(135deg, var(--bege), var(--branco));
      padding: 2.5rem;
      border-radius: 15px;
      margin: 1.5rem 0;
      border: 3px dashed var(--vermelho-rosado);
      position: relative;
    }


    .qr-placeholder {
      font-size: 4rem;
      margin-bottom: 1rem;
    }


    .qr-text {
      font-weight: 700;
      color: var(--text);
      margin-bottom: 0.5rem;
    }


    .qr-subtext {
      color: var(--text-light);
      font-size: 0.9rem;
    }


    .pix-code {
      background: var(--bege);
      padding: 1.2rem;
      border-radius: 10px;
      margin: 1.5rem 0;
      border: 1px solid var(--lilas);
      font-family: 'Courier New', monospace;
      word-break: break-all;
      font-size: 0.9rem;
      line-height: 1.4;
    }


    .copy-btn {
      background: var(--vermelho-rosado);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }


    .copy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(209, 101, 109, 0.3);
    }


    .timer {
      font-size: 1.3rem;
      font-weight: bold;
      color: var(--vermelho-rosado);
      margin: 1.5rem 0;
      padding: 1rem;
      background: var(--bege);
      border-radius: 10px;
      border: 2px solid var(--lilas);
    }


    .card-form {
      text-align: left;
      max-width: 400px;
      margin: 0 auto;
    }


    .form-group {
      margin-bottom: 1.5rem;
    }


    .form-group label {
      display: block;
      margin-bottom: 0.8rem;
      font-weight: 600;
      color: var(--text);
    }


    .form-control {
      width: 100%;
      padding: 1rem;
      border: 2px solid var(--lilas);
      border-radius: 10px;
      font-size: 1rem;
      transition: var(--transition);
      background: var(--branco);
    }


    .form-control:focus {
      outline: none;
      border-color: var(--vermelho-rosado);
      box-shadow: 0 0 0 3px rgba(209, 101, 109, 0.1);
    }


    .card-row {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 1rem;
    }


    .test-cards {
      background: linear-gradient(135deg, var(--bege), #f8f0ff);
      padding: 1.5rem;
      border-radius: 12px;
      margin-top: 2rem;
      font-size: 0.9rem;
      border: 2px solid var(--lilas);
    }


    .test-cards strong {
      color: var(--vermelho-rosado);
      display: block;
      margin-bottom: 0.8rem;
      font-size: 1rem;
    }


    /* Loading */
    .loading {
      display: none;
      text-align: center;
      margin-top: 2rem;
      padding: 2rem;
    }


    .spinner {
      border: 4px solid var(--bege);
      border-top: 4px solid var(--vermelho-rosado);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 1.5rem;
    }


    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }


    /* Footer */
    footer {
      background: linear-gradient(135deg, var(--vermelho-rosado), var(--lilas));
      color: var(--branco);
      padding: 2rem 0;
      margin-top: 3rem;
    }


    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }


    .footer-column h3 {
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }


    .footer-column ul {
      list-style: none;
    }


    .footer-column ul li {
      margin-bottom: 0.5rem;
    }


    .footer-column a {
      color: var(--branco);
      text-decoration: none;
      opacity: 0.9;
      transition: var(--transition);
    }


    .footer-column a:hover {
      opacity: 1;
      text-decoration: underline;
    }


    .copyright {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      opacity: 0.8;
    }


    /* Responsive */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }


      .logo img {
        height: 70px;
      }


      .checkout-grid {
        gap: 2rem;
      }


      .order-summary, .payment-methods {
        padding: 2rem;
      }


      .plan-price {
        font-size: 2rem;
      }


      .card-row {
        grid-template-columns: 1fr;
      }
    }


    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <img src="logoamorconect.png" alt="Amor Conect">
          <h1>Amor Conect</h1>
        </div>
        <a href="pricing.html" class="btn btn-outline">‚Üê Voltar para Planos</a>
      </div>
    </div>
  </header>


  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <div class="checkout-grid">
        <!-- Order Summary -->
        <div class="order-summary">
          <h2 class="section-title">Ôìã Resumo do Pedido</h2>
          
          <div class="plan-selected">
            <div class="plan-name" id="planName">Plano Mensal</div>
            <div class="plan-price" id="planPrice">R$ 14,90</div>
            <div class="plan-period" id="planPeriod">por m√™s</div>
          </div>


          <h3 style="margin-bottom: 1rem; color: var(--vermelho-rosado); text-align: center;">ÔéÅ Benef√≠cios Inclu√≠dos:</h3>
          <ul class="benefits-list">
            <li>Ôí¨ Mensagens ilimitadas</li>
            <li>Ôïí Hist√≥rico permanente</li>
            <li>Ôì∏ At√© 7 fotos no perfil</li>
            <li>Ôõü Suporte priorit√°rio (6h)</li>
            <li>ÔëÅÔ∏è Modo invis√≠vel</li>
            <li>Ôö´ Bloquear mensagens</li>
            <li>ÔëÄ Ver visitantes do perfil</li>
          </ul>


          <div class="security-note">
            Ôîí Pagamento 100% seguro via Mercado Pago | Ambiente de testes
          </div>
        </div>


        <!-- Payment Methods -->
        <div class="payment-methods">
          <h2 class="section-title">Ôí≥ Pagamento</h2>
          
          <div class="payment-options">
            <div class="payment-option selected" onclick="selectPayment('pix')">
              <div class="payment-icon">Ôì±</div>
              <div class="payment-info">
                <div class="payment-title">PIX</div>
                <div class="payment-desc">Pagamento instant√¢neo ‚Ä¢ Aprova√ß√£o imediata</div>
              </div>
            </div>


            <div class="payment-option" onclick="selectPayment('card')">
              <div class="payment-icon">Ôí≥</div>
              <div class="payment-info">
                <div class="payment-title">Cart√£o de Cr√©dito</div>
                <div class="payment-desc">At√© 12x sem juros ‚Ä¢ D√©bito tamb√©m</div>
              </div>
            </div>
          </div>


          <button class="btn btn-primary" id="continueButton" onclick="showPaymentSimulation()" style="width: 100%; padding: 1.2rem;">
            ‚ñ∂Ô∏è Continuar para Pagamento
          </button>


          <!-- PIX Simulation -->
          <div class="payment-simulation" id="pixSimulation">
            <div class="pix-container">
              <h3 class="simulation-title">Ôì± Pagamento PIX</h3>
              <p style="color: var(--text-light); margin-bottom: 1.5rem;">Escaneie o QR Code ou copie o c√≥digo PIX</p>
              
              <div class="pix-qr-code">
                <div class="qr-placeholder">ÔéØ</div>
                <div class="qr-text">QR CODE SIMULADO</div>
                <div class="qr-subtext">Abra seu app de banco e escaneie</div>
              </div>


              <div class="pix-code" id="pixCode">
                00020126580014br.gov.bcb.pix0136123e4567-e89b-12d3-a456-426614174000520400005303986540614.905802BR5913AMOR CONECT6008BRASILIA62070503***6304A1A2
              </div>
              
              <button class="copy-btn" onclick="copyPixCode()">
                Ôìã Copiar C√≥digo PIX
              </button>


              <div class="timer" id="pixTimer">
                ‚è≥ Tempo restante: 29:59
              </div>


              <button class="btn btn-primary" onclick="simulatePixPayment()" style="width: 100%; padding: 1.2rem; margin-top: 1rem;">
                ‚úÖ Simular Pagamento Conclu√≠do
              </button>


              <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-light); text-align: center; padding: 1rem; background: var(--bege); border-radius: 8px;">
                Ôí° <strong>Para teste:</strong> Clique no bot√£o acima para simular pagamento PIX conclu√≠do
              </div>
            </div>
          </div>


          <!-- Card Simulation -->
          <div class="payment-simulation" id="cardSimulation">
            <div class="card-container">
              <h3 class="simulation-title">Ôí≥ Pagamento com Cart√£o</h3>
              
              <div class="card-form">
                <div class="form-group">
                  <label>N√∫mero do Cart√£o</label>
                  <input type="text" class="form-control" id="cardNumber"
                      placeholder="1234 5678 9012 3456" maxlength="19">
                </div>


                <div class="card-row">
                  <div class="form-group">
                    <label>Validade</label>
                    <input type="text" class="form-control" id="cardExpiry"
                        placeholder="MM/AA" maxlength="5">
                  </div>
                  <div class="form-group">
                    <label>CVV</label>
                    <input type="text" class="form-control" id="cardCvv"
                        placeholder="123" maxlength="3">
                  </div>
                </div>


                <div class="form-group">
                  <label>Nome no Cart√£o</label>
                  <input type="text" class="form-control" id="cardName"
                      placeholder="SEU NOME AQUI">
                </div>


                <div class="form-group">
                  <label>CPF do Titular</label>
                  <input type="text" class="form-control" id="cardCpf"
                      placeholder="123.456.789-00">
                </div>
              </div>


              <div class="test-cards">
                <strong>Ôí≥ Cart√µes para Teste (Mercado Pago Sandbox):</strong>
                ‚Ä¢ <strong>Cart√£o Aprovado:</strong> 5031 4332 1540 6351<br>
                ‚Ä¢ <strong>CVV:</strong> 123 | <strong>Validade:</strong> 11/25<br>
                ‚Ä¢ <strong>Nome:</strong> Qualquer | <strong>CPF:</strong> Qualquer
              </div>


              <button class="btn btn-primary" onclick="processCardPayment()" style="width: 100%; padding: 1.2rem; margin-top: 1.5rem;">
                Ôí≥ Finalizar Pagamento
              </button>
            </div>
          </div>


          <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="color: var(--text-light); font-size: 1.1rem;">Processando seu pagamento...</p>
          </div>
        </div>
      </div>
    </div>
  </main>


  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>Amor Conect</h3>
          <p>Uma plataforma segura e discreta para conectar cora√ß√µes e construir relacionamentos genu√≠nos.</p>
        </div>
        <div class="footer-column">
          <h3>Links R√°pidos</h3>
          <ul>
            <li><a href="home.html">Ôè† Home</a></li>
            <li><a href="pricing.html">Ôíé Planos</a></li>
            <li><a href="mensagens.html">Ôíå Mensagens</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Suporte</h3>
          <ul>
            <li><a href="#">Ôìû Central de Ajuda</a></li>
            <li><a href="#">Ôîí Pol√≠tica de Privacidade</a></li>
            <li><a href="#">Ôìù Termos de Uso</a></li>
          </ul>
        </div>
      </div>
      <div class="copyright">
        <p>&copy; 2024 Amor Conect. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>


<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - Amor Conect</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://sdk.mercadopago.com/js/v2"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }


    :root {
      --bege: #f6ecc5;
      --vermelho-rosado: #d1656d;
      --lilas: #dfc9ed;
      --branco: #ffffff;
      --text: #444;
      --text-light: #666;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s ease;
    }


    body {
      background-color: var(--bege);
      color: var(--text);
      line-height: 1.6;
    }


    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }


    /* Header */
    header {
      background: linear-gradient(135deg, var(--vermelho-rosado), var(--lilas));
      color: var(--branco);
      padding: 1rem 0;
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
    }


    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }


    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }


    .logo img {
      height: 80px;
      width: auto;
      object-fit: contain;
    }


    .logo h1 {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--branco);
    }


    .btn {
      padding: 0.8rem 2rem;
      border-radius: 30px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      display: inline-block;
      text-align: center;
      font-size: 1rem;
    }


    .btn-outline {
      background: transparent;
      border: 2px solid var(--branco);
      color: var(--branco);
    }


    .btn-primary {
      background: var(--vermelho-rosado);
      color: var(--branco);
      border: none;
    }


    .btn-secondary {
      background: transparent;
      border: 2px solid var(--vermelho-rosado);
      color: var(--vermelho-rosado);
    }


    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }


    /* Main Content */
    .main-content {
      padding: 3rem 0;
      min-height: calc(100vh - 200px);
    }


    .checkout-grid {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 3rem;
      align-items: start;
    }


    @media (max-width: 968px) {
      .checkout-grid {
        grid-template-columns: 1fr;
      }
    }


    /* Order Summary */
    .order-summary {
      background: var(--branco);
      border-radius: 20px;
      padding: 2.5rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--lilas);
    }


    .section-title {
      font-size: 1.8rem;
      color: var(--vermelho-rosado);
      margin-bottom: 2rem;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }


    .plan-selected {
      background: linear-gradient(135deg, var(--lilas), var(--bege));
      padding: 2rem;
      border-radius: 15px;
      margin-bottom: 2rem;
      text-align: center;
      border: 2px solid var(--lilas);
    }


    .plan-name {
      font-size: 1.6rem;
      color: var(--vermelho-rosado);
      margin-bottom: 0.5rem;
      font-weight: 700;
    }


    .plan-price {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      color: var(--text);
    }


    .plan-period {
      color: var(--text-light);
      font-size: 1.1rem;
    }


    .benefits-list {
      list-style: none;
      margin: 2rem 0;
    }


    .benefits-list li {
      padding: 1rem 0;
      border-bottom: 1px solid var(--bege);
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 1.1rem;
    }


    .benefits-list li:last-child {
      border-bottom: none;
    }


    .security-note {
      text-align: center;
      color: var(--text-light);
      font-size: 0.9rem;
      margin-top: 2rem;
      padding: 1rem;
      background: var(--bege);
      border-radius: 10px;
    }


    /* Payment Methods */
    .payment-methods {
      background: var(--branco);
      border-radius: 20px;
      padding: 2.5rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--lilas);
      position: sticky;
      top: 120px;
    }


    .payment-options {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
    }


    .payment-option {
      background: var(--bege);
      padding: 1.5rem;
      border-radius: 15px;
      cursor: pointer;
      transition: var(--transition);
      border: 2px solid transparent;
      display: flex;
      align-items: center;
      gap: 15px;
    }


    .payment-option:hover {
      border-color: var(--lilas);
      transform: translateY(-2px);
    }


    .payment-option.selected {
      border-color: var(--vermelho-rosado);
      background: linear-gradient(135deg, #f8f0ff, var(--bege));
    }


    .payment-icon {
      font-size: 2rem;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--branco);
      border-radius: 12px;
    }


    .payment-info {
      flex: 1;
    }


    .payment-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 0.3rem;
      color: var(--text);
    }


    .payment-desc {
      color: var(--text-light);
      font-size: 0.9rem;
    }


    /* Payment Simulation */
    .payment-simulation {
      display: none;
      background: var(--branco);
      border-radius: 15px;
      padding: 2rem;
      margin-top: 2rem;
      border: 2px solid var(--lilas);
      animation: fadeIn 0.3s ease;
    }


    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }


    .pix-container, .card-container {
      text-align: center;
    }


    .simulation-title {
      font-size: 1.4rem;
      color: var(--vermelho-rosado);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }


    .pix-qr-code {
      background: linear-gradient(135deg, var(--bege), var(--branco));
      padding: 2.5rem;
      border-radius: 15px;
      margin: 1.5rem 0;
      border: 3px dashed var(--vermelho-rosado);
      position: relative;
    }


    .qr-placeholder {
      font-size: 4rem;
      margin-bottom: 1rem;
    }


    .qr-text {
      font-weight: 700;
      color: var(--text);
      margin-bottom: 0.5rem;
    }


    .qr-subtext {
      color: var(--text-light);
      font-size: 0.9rem;
    }


    .pix-code {
      background: var(--bege);
      padding: 1.2rem;
      border-radius: 10px;
      margin: 1.5rem 0;
      border: 1px solid var(--lilas);
      font-family: 'Courier New', monospace;
      word-break: break-all;
      font-size: 0.9rem;
      line-height: 1.4;
    }


    .copy-btn {
      background: var(--vermelho-rosado);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }


    .copy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(209, 101, 109, 0.3);
    }


    .timer {
      font-size: 1.3rem;
      font-weight: bold;
      color: var(--vermelho-rosado);
      margin: 1.5rem 0;
      padding: 1rem;
      background: var(--bege);
      border-radius: 10px;
      border: 2px solid var(--lilas);
    }


    .card-form {
      text-align: left;
      max-width: 400px;
      margin: 0 auto;
    }


    .form-group {
      margin-bottom: 1.5rem;
    }


    .form-group label {
      display: block;
      margin-bottom: 0.8rem;
      font-weight: 600;
      color: var(--text);
    }


    .form-control {
      width: 100%;
      padding: 1rem;
      border: 2px solid var(--lilas);
      border-radius: 10px;
      font-size: 1rem;
      transition: var(--transition);
      background: var(--branco);
    }


    .form-control:focus {
      outline: none;
      border-color: var(--vermelho-rosado);
      box-shadow: 0 0 0 3px rgba(209, 101, 109, 0.1);
    }


    .card-row {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 1rem;
    }


    .test-cards {
      background: linear-gradient(135deg, var(--bege), #f8f0ff);
      padding: 1.5rem;
      border-radius: 12px;
      margin-top: 2rem;
      font-size: 0.9rem;
      border: 2px solid var(--lilas);
    }


    .test-cards strong {
      color: var(--vermelho-rosado);
      display: block;
      margin-bottom: 0.8rem;
      font-size: 1rem;
    }


    /* Loading */
    .loading {
      display: none;
      text-align: center;
      margin-top: 2rem;
      padding: 2rem;
    }


    .spinner {
      border: 4px solid var(--bege);
      border-top: 4px solid var(--vermelho-rosado);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 1.5rem;
    }


    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }


    /* Footer */
    footer {
      background: linear-gradient(135deg, var(--vermelho-rosado), var(--lilas));
      color: var(--branco);
      padding: 2rem 0;
      margin-top: 3rem;
    }


    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }


    .footer-column h3 {
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }


    .footer-column ul {
      list-style: none;
    }


    .footer-column ul li {
      margin-bottom: 0.5rem;
    }


    .footer-column a {
      color: var(--branco);
      text-decoration: none;
      opacity: 0.9;
      transition: var(--transition);
    }


    .footer-column a:hover {
      opacity: 1;
      text-decoration: underline;
    }


    .copyright {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      opacity: 0.8;
    }


    /* Responsive */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }


      .logo img {
        height: 70px;
      }


      .checkout-grid {
        gap: 2rem;
      }


      .order-summary, .payment-methods {
        padding: 2rem;
      }


      .plan-price {
        font-size: 2rem;
      }


      .card-row {
        grid-template-columns: 1fr;
      }
    }


    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <img src="logoamorconect.png" alt="Amor Conect">
          <h1>Amor Conect</h1>
        </div>
        <a href="pricing.html" class="btn btn-outline">‚Üê Voltar para Planos</a>
      </div>
    </div>
  </header>


  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <div class="checkout-grid">
        <!-- Order Summary -->
        <div class="order-summary">
          <h2 class="section-title">Ôìã Resumo do Pedido</h2>
          
          <div class="plan-selected">
            <div class="plan-name" id="planName">Plano Mensal</div>
            <div class="plan-price" id="planPrice">R$ 14,90</div>
            <div class="plan-period" id="planPeriod">por m√™s</div>
          </div>


          <h3 style="margin-bottom: 1rem; color: var(--vermelho-rosado); text-align: center;">ÔéÅ Benef√≠cios Inclu√≠dos:</h3>
          <ul class="benefits-list">
            <li>Ôí¨ Mensagens ilimitadas</li>
            <li>Ôïí Hist√≥rico permanente</li>
            <li>Ôì∏ At√© 7 fotos no perfil</li>
            <li>Ôõü Suporte priorit√°rio (6h)</li>
            <li>ÔëÅÔ∏è Modo invis√≠vel</li>
            <li>Ôö´ Bloquear mensagens</li>
            <li>ÔëÄ Ver visitantes do perfil</li>
          </ul>


          <div class="security-note">
            Ôîí Pagamento 100% seguro via Mercado Pago | Ambiente de testes
          </div>
        </div>


        <!-- Payment Methods -->
        <div class="payment-methods">
          <h2 class="section-title">Ôí≥ Pagamento</h2>
          
          <div class="payment-options">
            <div class="payment-option selected" onclick="selectPayment('pix')">
              <div class="payment-icon">Ôì±</div>
              <div class="payment-info">
                <div class="payment-title">PIX</div>
                <div class="payment-desc">Pagamento instant√¢neo ‚Ä¢ Aprova√ß√£o imediata</div>
              </div>
            </div>


            <div class="payment-option" onclick="selectPayment('card')">
              <div class="payment-icon">Ôí≥</div>
              <div class="payment-info">
                <div class="payment-title">Cart√£o de Cr√©dito</div>
                <div class="payment-desc">At√© 12x sem juros ‚Ä¢ D√©bito tamb√©m</div>
              </div>
            </div>
          </div>


          <button class="btn btn-primary" id="continueButton" onclick="showPaymentSimulation()" style="width: 100%; padding: 1.2rem;">
            ‚ñ∂Ô∏è Continuar para Pagamento
          </button>


          <!-- PIX Simulation -->
          <div class="payment-simulation" id="pixSimulation">
            <div class="pix-container">
              <h3 class="simulation-title">Ôì± Pagamento PIX</h3>
              <p style="color: var(--text-light); margin-bottom: 1.5rem;">Escaneie o QR Code ou copie o c√≥digo PIX</p>
              
              <div class="pix-qr-code">
                <div class="qr-placeholder">ÔéØ</div>
                <div class="qr-text">QR CODE SIMULADO</div>
                <div class="qr-subtext">Abra seu app de banco e escaneie</div>
              </div>


              <div class="pix-code" id="pixCode">
                00020126580014br.gov.bcb.pix0136123e4567-e89b-12d3-a456-426614174000520400005303986540614.905802BR5913AMOR CONECT6008BRASILIA62070503***6304A1A2
              </div>
              
              <button class="copy-btn" onclick="copyPixCode()">
                Ôìã Copiar C√≥digo PIX
              </button>


              <div class="timer" id="pixTimer">
                ‚è≥ Tempo restante: 29:59
              </div>


              <button class="btn btn-primary" onclick="simulatePixPayment()" style="width: 100%; padding: 1.2rem; margin-top: 1rem;">
                ‚úÖ Simular Pagamento Conclu√≠do
              </button>


              <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-light); text-align: center; padding: 1rem; background: var(--bege); border-radius: 8px;">
                Ôí° <strong>Para teste:</strong> Clique no bot√£o acima para simular pagamento PIX conclu√≠do
              </div>
            </div>
          </div>


          <!-- Card Simulation -->
          <div class="payment-simulation" id="cardSimulation">
            <div class="card-container">
              <h3 class="simulation-title">Ôí≥ Pagamento com Cart√£o</h3>
              
              <div class="card-form">
                <div class="form-group">
                  <label>N√∫mero do Cart√£o</label>
                  <input type="text" class="form-control" id="cardNumber"
                      placeholder="1234 5678 9012 3456" maxlength="19">
                </div>


                <div class="card-row">
                  <div class="form-group">
                    <label>Validade</label>
                    <input type="text" class="form-control" id="cardExpiry"
                        placeholder="MM/AA" maxlength="5">
                  </div>
                  <div class="form-group">
                    <label>CVV</label>
                    <input type="text" class="form-control" id="cardCvv"
                        placeholder="123" maxlength="3">
                  </div>
                </div>


                <div class="form-group">
                  <label>Nome no Cart√£o</label>
                  <input type="text" class="form-control" id="cardName"
                      placeholder="SEU NOME AQUI">
                </div>


                <div class="form-group">
                  <label>CPF do Titular</label>
                  <input type="text" class="form-control" id="cardCpf"
                      placeholder="123.456.789-00">
                </div>
              </div>


              <div class="test-cards">
                <strong>Ôí≥ Cart√µes para Teste (Mercado Pago Sandbox):</strong>
                ‚Ä¢ <strong>Cart√£o Aprovado:</strong> 5031 4332 1540 6351<br>
                ‚Ä¢ <strong>CVV:</strong> 123 | <strong>Validade:</strong> 11/25<br>
                ‚Ä¢ <strong>Nome:</strong> Qualquer | <strong>CPF:</strong> Qualquer
              </div>


              <button class="btn btn-primary" onclick="processCardPayment()" style="width: 100%; padding: 1.2rem; margin-top: 1.5rem;">
                Ôí≥ Finalizar Pagamento
              </button>
            </div>
          </div>


          <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="color: var(--text-light); font-size: 1.1rem;">Processando seu pagamento...</p>
          </div>
        </div>
      </div>
    </div>
  </main>


  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>Amor Conect</h3>
          <p>Uma plataforma segura e discreta para conectar cora√ß√µes e construir relacionamentos genu√≠nos.</p>
        </div>
        <div class="footer-column">
          <h3>Links R√°pidos</h3>
          <ul>
            <li><a href="home.html">Ôè† Home</a></li>
            <li><a href="pricing.html">Ôíé Planos</a></li>
            <li><a href="mensagens.html">Ôíå Mensagens</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Suporte</h3>
          <ul>
            <li><a href="#">Ôìû Central de Ajuda</a></li>
            <li><a href="#">Ôîí Pol√≠tica de Privacidade</a></li>
            <li><a href="#">Ôìù Termos de Uso</a></li>
          </ul>
        </div>
      </div>
      <div class="copyright">
        <p>&copy; 2024 Amor Conect. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>


 <script>
 // ==================== CONFIGURA√á√ïES ====================
const SUPABASE_URL = 'https://gcukalndarlgydmgmmmt.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdjdWthbG5kYXJsZ3lkbWdtbW10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NzI1ODEsImV4cCI6MjA3NTI0ODU4MX0.S1Qt1UbmK-Jtq2dX7Aarf2rDLZhoLgEcSLkCrBfIhUU';
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// ==================== SISTEMA PREMIUM DEFINITIVO ====================
const PremiumSystem = {
    async createSubscription(userId, planType) {
        console.log('üéØ CRIANDO ASSINATURA DEFINITIVA...');
        console.log('üë§ Usu√°rio:', userId);
        console.log('üì¶ Plano:', planType);
        
        // ‚úÖ PRIMEIRO: Buscar o plano REAL na tabela subscription_plans
        const { data: realPlan, error: planError } = await supabase
            .from('subscription_plans')
            .select('id, price, period_days')
            .eq('name', planType)
            .single();

        if (planError || !realPlan) {
            console.error('‚ùå Plano n√£o encontrado, usando fallback:', planError);
            // Fallback se n√£o encontrar o plano
            const fallbackMap = {
                'weekly': { id: '123e4567-e89b-12d3-a456-426614174001', days: 7, price: 4.90 },
                'monthly': { id: '123e4567-e89b-12d3-a456-426614174002', days: 30, price: 14.90 },
                'semestral': { id: '123e4567-e89b-12d3-a456-426614174003', days: 180, price: 74.90 },
                'annual': { id: '123e4567-e89b-12d3-a456-426614174004', days: 365, price: 129.90 }
            };
            
            const fallbackPlan = fallbackMap[planType] || fallbackMap['monthly'];
            return await this.createWithFallback(userId, fallbackPlan, planType);
        }

        console.log('üìã Plano real encontrado:', realPlan);

        const expiresAt = new Date();
        expiresAt.setDate(expiresAt.getDate() + (realPlan.period_days || 30));

        console.log('üìÖ Expira em:', expiresAt);

        // ‚úÖ 1. CRIAR NA TABELA user_subscriptions (FONTE DA VERDADE)
        const { data: subscription, error } = await supabase
            .from('user_subscriptions')
            .upsert({
                user_id: userId,
                plan_id: realPlan.id, // ‚úÖ ID REAL do plano
                status: 'active',
                starts_at: new Date().toISOString(),
                expires_at: expiresAt.toISOString(),
                auto_renew: false,
                created_at: new Date().toISOString(),
                updated_at: new Date().toISOString()
            }, {
                onConflict: 'user_id'
            })
            .select()
            .single();

        if (error) {
            console.error('‚ùå Erro ao criar assinatura:', error);
            throw new Error('Falha ao criar assinatura: ' + error.message);
        }
        
        console.log('‚úÖ ASSINATURA CRIADA COM SUCESSO:', subscription);

        // ‚úÖ 2. REGISTRAR TRANSA√á√ÉO DE PAGAMENTO
        try {
            const { error: txError } = await supabase
                .from('payment_transactions')
                .insert({
                    user_id: userId,
                    plan_id: realPlan.id, // ‚úÖ ID REAL do plano
                    amount: realPlan.price,
                    payment_method: selectedPayment,
                    payment_gateway: 'mercadopago',
                    gateway_transaction_id: 'mp_' + Date.now(),
                    gateway_status: 'approved',
                    status: 'completed',
                    created_at: new Date().toISOString()
                });

            if (txError) {
                console.log('‚ö†Ô∏è Transa√ß√£o n√£o registrada:', txError);
            } else {
                console.log('‚úÖ Transa√ß√£o registrada');
            }
        } catch (txError) {
            console.log('‚ö†Ô∏è Erro na transa√ß√£o:', txError);
        }

        return subscription;
    },

    async createWithFallback(userId, fallbackPlan, planType) {
        console.log('üîÑ Usando fallback para cria√ß√£o de assinatura...');
        
        const expiresAt = new Date();
        expiresAt.setDate(expiresAt.getDate() + fallbackPlan.days);

        // Criar assinatura com fallback
        const { data: subscription, error } = await supabase
            .from('user_subscriptions')
            .upsert({
                user_id: userId,
                plan_id: fallbackPlan.id,
                status: 'active',
                starts_at: new Date().toISOString(),
                expires_at: expiresAt.toISOString(),
                auto_renew: false
            })
            .select()
            .single();

        if (error) throw error;
        
        return subscription;
    }
};

// ==================== VARI√ÅVEIS GLOBAIS ====================
let selectedPlan = {};
let selectedPayment = 'pix';
let pixTimer = 30 * 60;
let timerInterval;

// ==================== INICIALIZA√á√ÉO ====================
document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ Checkout inicializado');
    loadPlanFromURL();
    checkAuth();
    setupCardInputs();
});

// ==================== FUN√á√ïES PRINCIPAIS ====================
function loadPlanFromURL() {
    const urlParams = new URLSearchParams(window.location.search);
    const planType = urlParams.get('plano');
    
    const plans = {
        'weekly': { name: 'Semanal', price: 4.90, period: 'por semana' },
        'monthly': { name: 'Mensal', price: 14.90, period: 'por m√™s' },
        'semestral': { name: 'Semestral', price: 74.90, period: 'por 6 meses' },
        'annual': { name: 'Anual', price: 129.90, period: 'por ano' }
    };

    selectedPlan = plans[planType] || plans['monthly'];
    
    document.getElementById('planName').textContent = `Plano ${selectedPlan.name}`;
    document.getElementById('planPrice').textContent = `R$ ${selectedPlan.price.toFixed(2).replace('.', ',')}`;
    document.getElementById('planPeriod').textContent = selectedPlan.period;
    
    console.log('üìã Plano carregado:', selectedPlan);
}

function selectPayment(method) {
    selectedPayment = method;
    document.querySelectorAll('.payment-option').forEach(option => {
        option.classList.remove('selected');
    });
    event.currentTarget.classList.add('selected');
    console.log('üí≥ M√©todo selecionado:', method);
}

function showPaymentSimulation() {
    const continueBtn = document.getElementById('continueButton');
    const pixSimulation = document.getElementById('pixSimulation');
    const cardSimulation = document.getElementById('cardSimulation');
    
    continueBtn.style.display = 'none';
    
    if (selectedPayment === 'pix') {
        pixSimulation.style.display = 'block';
        startPixTimer();
    } else {
        cardSimulation.style.display = 'block';
    }
    
    console.log('üéØ Mostrando simula√ß√£o:', selectedPayment);
}

// ==================== PIX SIMULATION ====================
function startPixTimer() {
    pixTimer = 30 * 60;
    
    timerInterval = setInterval(() => {
        pixTimer--;
        const minutes = Math.floor(pixTimer / 60);
        const seconds = pixTimer % 60;
        
        document.getElementById('pixTimer').textContent =
            `‚è≥ Tempo restante: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        if (pixTimer <= 0) {
            clearInterval(timerInterval);
            alert('Tempo esgotado! Por favor, gere um novo c√≥digo PIX.');
        }
    }, 1000);
}

function copyPixCode() {
    const pixCode = document.getElementById('pixCode').textContent;
    navigator.clipboard.writeText(pixCode).then(() => {
        alert('C√≥digo PIX copiado! Cole no seu app de banco.');
    });
}

async function simulatePixPayment() {
    console.log('üîÑ Iniciando pagamento PIX...');
    clearInterval(timerInterval);
    document.getElementById('loading').style.display = 'block';

    try {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) throw new Error('Usu√°rio n√£o autenticado');

        const subscription = await PremiumSystem.createSubscription(user.id, getPlanType());
        
        console.log('‚úÖ Pagamento PIX processado! Redirecionando...');
        setTimeout(() => {
            window.location.href = `pagamento-sucesso.html?plano=${getPlanType()}&valor=${selectedPlan.price}&metodo=pix&subscription_id=${subscription.id}`;
        }, 2000);
        
    } catch (error) {
        console.error('‚ùå Erro no PIX:', error);
        alert('Erro ao processar PIX: ' + error.message);
        document.getElementById('loading').style.display = 'none';
    }
}

// ==================== CARD SIMULATION ====================
function setupCardInputs() {
    document.getElementById('cardNumber').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        value = value.replace(/(\d{4})(?=\d)/g, '$1 ');
        e.target.value = value.substring(0, 19);
    });

    document.getElementById('cardExpiry').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length >= 2) {
            value = value.substring(0, 2) + '/' + value.substring(2, 4);
        }
        e.target.value = value.substring(0, 5);
    });

    document.getElementById('cardCvv').addEventListener('input', function(e) {
        e.target.value = e.target.value.replace(/\D/g, '').substring(0, 3);
    });

    document.getElementById('cardCpf').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length <= 11) {
            value = value.replace(/(\d{3})(\d)/, '$1.$2')
                        .replace(/(\d{3})(\d)/, '$1.$2')
                        .replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        }
        e.target.value = value.substring(0, 14);
    });
}

async function processCardPayment() {
    console.log('üîÑ Iniciando pagamento com cart√£o...');
    
    const cardNumber = document.getElementById('cardNumber').value.replace(/\D/g, '');
    const cardExpiry = document.getElementById('cardExpiry').value;
    const cardCvv = document.getElementById('cardCvv').value;
    const cardName = document.getElementById('cardName').value;
    const cardCpf = document.getElementById('cardCpf').value.replace(/\D/g, '');

    if (!cardNumber || !cardExpiry || !cardCvv || !cardName || !cardCpf) {
        alert('Por favor, preencha todos os campos do cart√£o.');
        return;
    }

    document.getElementById('loading').style.display = 'block';

    try {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) throw new Error('Usu√°rio n√£o autenticado');

        const subscription = await PremiumSystem.createSubscription(user.id, getPlanType());
        
        console.log('‚úÖ Pagamento com cart√£o processado! Redirecionando...');
        setTimeout(() => {
            window.location.href = `pagamento-sucesso.html?plano=${getPlanType()}&valor=${selectedPlan.price}&metodo=cartao&subscription_id=${subscription.id}`;
        }, 2000);
        
    } catch (error) {
        console.error('‚ùå Erro no pagamento com cart√£o:', error);
        alert('Erro ao processar pagamento: ' + error.message);
        document.getElementById('loading').style.display = 'none';
    }
}

// ==================== FUN√á√ïES AUXILIARES ====================
async function checkAuth() {
    try {
        const { data: { user }, error } = await supabase.auth.getUser();
        if (error || !user) {
            window.location.href = 'login.html';
            return;
        }
        console.log('‚úÖ Usu√°rio autenticado:', user.email);
    } catch (error) {
        console.error('Erro na autentica√ß√£o:', error);
        window.location.href = 'login.html';
    }
}

function getPlanType() {
    for (const [key, value] of Object.entries({
        'weekly': { name: 'Semanal', price: 4.90 },
        'monthly': { name: 'Mensal', price: 14.90 },
        'semestral': { name: 'Semestral', price: 74.90 },
        'annual': { name: 'Anual', price: 129.90 }
    })) {
        if (value.price === selectedPlan.price) return key;
    }
    return 'monthly';
}

// ==================== DEBUG ====================
window.debugCheckout = async function() {
    console.log('=== üß™ DEBUG CHECKOUT ===');
    const { data: { user } } = await supabase.auth.getUser();
    console.log('üë§ Usu√°rio:', user);
    console.log('üì¶ Plano selecionado:', selectedPlan);
    console.log('üí≥ Pagamento selecionado:', selectedPayment);
    
    const { data: existingSub } = await supabase
        .from('user_subscriptions')
        .select('*')
        .eq('user_id', user.id)
        .single();
        
    console.log('üìä Assinatura existente:', existingSub);
};

window.testCreateSubscription = async function() {
    console.log('=== üß™ TESTE CRIA√á√ÉO ASSINATURA ===');
    try {
        const { data: { user } } = await supabase.auth.getUser();
        const result = await PremiumSystem.createSubscription(user.id, 'monthly');
        console.log('‚úÖ Teste bem-sucedido:', result);
    } catch (error) {
        console.error('‚ùå Teste falhou:', error);
    }
};
</script>
</body>
</html>